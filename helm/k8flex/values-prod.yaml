# Production values for k8flex
replicaCount: 3

image:
  repository: k8flex-agent
  pullPolicy: IfNotPresent
  tag: "1.0.0"  # Use specific version in production

resources:
  limits:
    cpu: 1000m
    memory: 1Gi
  requests:
    cpu: 500m
    memory: 512Mi

config:
  ollama:
    url: "http://ollama.ollama.svc.cluster.local:11434"
    model: "llama3"  # Or llama2:70b for better analysis

slack:
  # IMPORTANT: Use secrets management in production
  # Do NOT commit real tokens to git
  # Use helm --set or external secrets operator
  botToken: ""  # Set via: --set slack.botToken="xoxb-..."
  channelId: ""  # Set via: --set slack.channelId="C..."

# High availability configuration
affinity:
  podAntiAffinity:
    preferredDuringSchedulingIgnoredDuringExecution:
      - weight: 100
        podAffinityTerm:
          labelSelector:
            matchExpressions:
              - key: app.kubernetes.io/name
                operator: In
                values:
                  - k8flex
          topologyKey: kubernetes.io/hostname

# Ensure pods run on appropriate nodes
nodeSelector:
  node-role.kubernetes.io/worker: "true"

# Allow scheduling on nodes with specific taints
tolerations:
  - key: "workload-type"
    operator: "Equal"
    value: "monitoring"
    effect: "NoSchedule"

# Pod disruption budget for high availability
podDisruptionBudget:
  enabled: true
  minAvailable: 1
